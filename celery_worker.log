2026-01-07 17:14:51 - httpx - INFO - HTTP Request: GET https://raw.githubusercontent.com/BerriAI/litellm/main/model_prices_and_context_window.json "HTTP/1.1 200 OK"
2026-01-07 17:14:52 - py.warnings - WARNING - /home/mahmoud/sprints/AIAT_Snippets/src/app/services/agent_service.py:21: LangChainDeprecationWarning: The class `ChatLiteLLM` was deprecated in LangChain 0.3.24 and will be removed in 1.0. An updated version of the class exists in the :class:`~langchain-litellm package and should be used instead. To use it run `pip install -U :class:`~langchain-litellm` and import as `from :class:`~langchain_litellm import ChatLiteLLM``.
  llm = ChatLiteLLM(model="gpt-4o-mini", api_key=settings.OPENAI_API_KEY)

 
 -------------- celery@elhusseni v5.5.3 (immunity)
--- ***** ----- 
-- ******* ---- Linux-6.8.0-90-generic-x86_64-with-glibc2.35 2026-01-07 17:14:52
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         worker:0x7522ee421a80
- ** ---------- .> transport:   redis://localhost:6379/0
- ** ---------- .> results:     redis://localhost:6379/0
- *** --- * --- .> concurrency: 12 (prefork)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> main-queue       exchange=main-queue(direct) key=main-queue
                .> video-queue      exchange=video-queue(direct) key=video-queue

[tasks]
  . src.app.workers.tasks.generate_snippet_video
  . src.app.workers.tasks.process_session_pipeline

[2026-01-07 17:14:54,492: INFO/MainProcess] Connected to redis://localhost:6379/0
[2026-01-07 17:14:54,493: INFO/MainProcess] mingle: searching for neighbors
[2026-01-07 17:14:55,498: INFO/MainProcess] mingle: all alone
[2026-01-07 17:14:55,503: INFO/MainProcess] celery@elhusseni ready.
[2026-01-07 17:20:43,165: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[a3868792-ada1-4570-8c77-2bb9f90d8daa] received
[2026-01-07 17:20:43,166: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 15
[2026-01-07 17:20:43,888: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.15&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 17:20:44,008: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.15 "HTTP/2 200 OK"
[2026-01-07 17:20:44,009: INFO/ForkPoolWorker-8] Downloading video for session 15 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15
[2026-01-07 17:20:44,010: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 17:20:44,010: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4...
[2026-01-07 17:20:44,804: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4
[2026-01-07 17:20:44,970: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.15 "HTTP/2 200 OK"
[2026-01-07 17:20:44,972: INFO/ForkPoolWorker-8] Generating transcript for session 15
[2026-01-07 17:20:44,972: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4
[2026-01-07 17:20:44,976: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 17:20:45,003: ERROR/ForkPoolWorker-8] Pipeline failed for session 15: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 17:20:45,121: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.15 "HTTP/2 200 OK"
[2026-01-07 17:20:45,124: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[a3868792-ada1-4570-8c77-2bb9f90d8daa] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found\n[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x1f3c1f00] moov atom not found
[in#0 @ 0x1f3c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/15/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 17:22:51,410: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[d97459e4-af89-4884-9621-9faed47d083f] received
[2026-01-07 17:22:51,411: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 16
[2026-01-07 17:22:51,901: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.16&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 17:22:52,020: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.16 "HTTP/2 200 OK"
[2026-01-07 17:22:52,022: INFO/ForkPoolWorker-8] Downloading video for session 16 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16
[2026-01-07 17:22:52,022: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 17:22:52,022: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4...
[2026-01-07 17:22:53,186: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4
[2026-01-07 17:22:53,311: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.16 "HTTP/2 200 OK"
[2026-01-07 17:22:53,311: INFO/ForkPoolWorker-8] Generating transcript for session 16
[2026-01-07 17:22:53,311: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4
[2026-01-07 17:22:53,314: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 17:22:53,314: ERROR/ForkPoolWorker-8] Pipeline failed for session 16: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 17:22:53,448: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.16 "HTTP/2 200 OK"
[2026-01-07 17:22:53,449: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[d97459e4-af89-4884-9621-9faed47d083f] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found\n[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x28a8df00] moov atom not found
[in#0 @ 0x28a8dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/16/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:14:13,162: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[e5c9e915-acb1-4f98-829a-49e7332f9d5a] received
[2026-01-07 18:14:13,163: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 21
[2026-01-07 18:14:13,850: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.21&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 18:14:13,995: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.21 "HTTP/2 200 OK"
[2026-01-07 18:14:13,995: INFO/ForkPoolWorker-8] Downloading video for session 21 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21
[2026-01-07 18:14:13,996: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 18:14:13,996: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4...
[2026-01-07 18:14:14,925: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4
[2026-01-07 18:14:15,043: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.21 "HTTP/2 200 OK"
[2026-01-07 18:14:15,045: INFO/ForkPoolWorker-8] Generating transcript for session 21
[2026-01-07 18:14:15,045: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4
[2026-01-07 18:14:15,047: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:14:15,047: ERROR/ForkPoolWorker-8] Pipeline failed for session 21: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:14:15,171: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.21 "HTTP/2 200 OK"
[2026-01-07 18:14:15,172: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[e5c9e915-acb1-4f98-829a-49e7332f9d5a] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found\n[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x9c03f00] moov atom not found
[in#0 @ 0x9c03bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/21/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:46:26,382: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[f5733cb3-ff80-4cfb-a50d-f7a810079674] received
[2026-01-07 18:46:26,386: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 24
[2026-01-07 18:46:26,894: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.24&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 18:46:27,023: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.24 "HTTP/2 200 OK"
[2026-01-07 18:46:27,023: INFO/ForkPoolWorker-8] Downloading video for session 24 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24
[2026-01-07 18:46:27,023: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 18:46:27,023: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4...
[2026-01-07 18:46:27,917: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4
[2026-01-07 18:46:28,041: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.24 "HTTP/2 200 OK"
[2026-01-07 18:46:28,044: INFO/ForkPoolWorker-8] Generating transcript for session 24
[2026-01-07 18:46:28,044: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4
[2026-01-07 18:46:28,050: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:46:28,051: ERROR/ForkPoolWorker-8] Pipeline failed for session 24: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:46:28,178: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.24 "HTTP/2 200 OK"
[2026-01-07 18:46:28,179: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[f5733cb3-ff80-4cfb-a50d-f7a810079674] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found\n[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdef0f00] moov atom not found
[in#0 @ 0xdef0bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/24/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:53:46,146: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[4cafc4fb-5264-4dd2-b449-c112b925ca80] received
[2026-01-07 18:53:46,146: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 26
[2026-01-07 18:53:46,824: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.26&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 18:53:46,947: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.26 "HTTP/2 200 OK"
[2026-01-07 18:53:46,948: INFO/ForkPoolWorker-8] Downloading video for session 26 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26
[2026-01-07 18:53:46,948: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 18:53:46,948: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4...
[2026-01-07 18:53:47,817: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4
[2026-01-07 18:53:47,936: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.26 "HTTP/2 200 OK"
[2026-01-07 18:53:47,938: INFO/ForkPoolWorker-8] Generating transcript for session 26
[2026-01-07 18:53:47,938: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4
[2026-01-07 18:53:47,940: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:53:47,940: ERROR/ForkPoolWorker-8] Pipeline failed for session 26: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:53:48,062: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.26 "HTTP/2 200 OK"
[2026-01-07 18:53:48,063: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[4cafc4fb-5264-4dd2-b449-c112b925ca80] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found\n[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x2f9d5f00] moov atom not found
[in#0 @ 0x2f9d5bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/26/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:54:41,114: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[633474a2-e9ea-4ec0-973e-213c367565b1] received
[2026-01-07 18:54:41,115: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 27
[2026-01-07 18:54:41,847: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.27&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 18:54:42,007: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.27 "HTTP/2 200 OK"
[2026-01-07 18:54:42,007: INFO/ForkPoolWorker-8] Downloading video for session 27 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27
[2026-01-07 18:54:42,007: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 18:54:42,008: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4...
[2026-01-07 18:54:42,812: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4
[2026-01-07 18:54:42,949: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.27 "HTTP/2 200 OK"
[2026-01-07 18:54:42,950: INFO/ForkPoolWorker-8] Generating transcript for session 27
[2026-01-07 18:54:42,950: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4
[2026-01-07 18:54:42,953: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:54:42,953: ERROR/ForkPoolWorker-8] Pipeline failed for session 27: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 18:54:43,088: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.27 "HTTP/2 200 OK"
[2026-01-07 18:54:43,090: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[633474a2-e9ea-4ec0-973e-213c367565b1] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found\n[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xfc9bf00] moov atom not found
[in#0 @ 0xfc9bbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/27/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 19:02:23,047: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[c1c53ad4-caca-41ef-8c0b-5ea26f2ade80] received
[2026-01-07 19:02:23,047: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 29
[2026-01-07 19:02:23,777: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.29&order=created_at.desc "HTTP/2 200 OK"
[2026-01-07 19:02:23,916: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.29 "HTTP/2 200 OK"
[2026-01-07 19:02:23,916: INFO/ForkPoolWorker-8] Downloading video for session 29 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29
[2026-01-07 19:02:23,916: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-07 19:02:23,916: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4...
[2026-01-07 19:02:28,720: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4
[2026-01-07 19:02:28,860: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.29 "HTTP/2 200 OK"
[2026-01-07 19:02:28,862: INFO/ForkPoolWorker-8] Generating transcript for session 29
[2026-01-07 19:02:28,862: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4
[2026-01-07 19:02:28,865: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 19:02:28,865: ERROR/ForkPoolWorker-8] Pipeline failed for session 29: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-07 19:02:28,986: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.29 "HTTP/2 200 OK"
[2026-01-07 19:02:28,987: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[c1c53ad4-caca-41ef-8c0b-5ea26f2ade80] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found\n[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x13276f00] moov atom not found
[in#0 @ 0x13276bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/29/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:14:08,219: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[18cfa51c-3ad2-4eba-8f22-5279d11002f4] received
[2026-01-08 00:14:08,220: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 31
[2026-01-08 00:14:09,308: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.31&order=created_at.desc "HTTP/2 200 OK"
[2026-01-08 00:14:09,431: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.31 "HTTP/2 200 OK"
[2026-01-08 00:14:09,432: INFO/ForkPoolWorker-8] Downloading video for session 31 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31
[2026-01-08 00:14:09,432: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-08 00:14:09,432: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4...
[2026-01-08 00:14:10,362: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4
[2026-01-08 00:14:10,476: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.31 "HTTP/2 200 OK"
[2026-01-08 00:14:10,477: INFO/ForkPoolWorker-8] Generating transcript for session 31
[2026-01-08 00:14:10,478: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4
[2026-01-08 00:14:10,480: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:14:10,480: ERROR/ForkPoolWorker-8] Pipeline failed for session 31: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:14:10,620: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.31 "HTTP/2 200 OK"
[2026-01-08 00:14:10,622: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[18cfa51c-3ad2-4eba-8f22-5279d11002f4] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found\n[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xb43df00] moov atom not found
[in#0 @ 0xb43dbc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/31/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:14:45,537: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[32707de6-6663-463a-88b7-ad489d6b4f29] received
[2026-01-08 00:14:45,538: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 32
[2026-01-08 00:14:46,215: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.32&order=created_at.desc "HTTP/2 200 OK"
[2026-01-08 00:14:46,367: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.32 "HTTP/2 200 OK"
[2026-01-08 00:14:46,368: INFO/ForkPoolWorker-8] Downloading video for session 32 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32
[2026-01-08 00:14:46,368: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-08 00:14:46,368: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4...
[2026-01-08 00:14:47,139: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4
[2026-01-08 00:14:47,291: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.32 "HTTP/2 200 OK"
[2026-01-08 00:14:47,292: INFO/ForkPoolWorker-8] Generating transcript for session 32
[2026-01-08 00:14:47,292: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4
[2026-01-08 00:14:47,295: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:14:47,295: ERROR/ForkPoolWorker-8] Pipeline failed for session 32: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:14:47,454: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.32 "HTTP/2 200 OK"
[2026-01-08 00:14:47,455: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[32707de6-6663-463a-88b7-ad489d6b4f29] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found\n[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x3f5c1f00] moov atom not found
[in#0 @ 0x3f5c1bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/32/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:15:44,666: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[c775dcab-a5b2-4436-98dc-b1745f9f9524] received
[2026-01-08 00:15:44,667: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 33
[2026-01-08 00:15:45,213: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.33&order=created_at.desc "HTTP/2 200 OK"
[2026-01-08 00:15:45,366: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.33 "HTTP/2 200 OK"
[2026-01-08 00:15:45,367: INFO/ForkPoolWorker-8] Downloading video for session 33 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/33
[2026-01-08 00:15:45,367: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=15K4mcpxMeHwa2EV_6OtaI8nV7DNOmlXf
[2026-01-08 00:15:45,367: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=15K4mcpxMeHwa2EV_6OtaI8nV7DNOmlXf to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/33/downloaded_video.mp4...
[2026-01-08 00:15:53,192: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/33/downloaded_video.mp4
[2026-01-08 00:15:54,252: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.33 "HTTP/2 200 OK"
[2026-01-08 00:15:54,253: INFO/ForkPoolWorker-8] Generating transcript for session 33
[2026-01-08 00:15:54,253: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/33/downloaded_video.mp4
[2026-01-08 00:15:54,385: INFO/ForkPoolWorker-8] Video duration: 0.22 mins. Splitting into 1 chunk(s).
[2026-01-08 00:15:54,385: INFO/ForkPoolWorker-8] Extracting audio for Chunk 1/1...
[2026-01-08 00:15:54,568: INFO/ForkPoolWorker-8] Starting parallel transcription for 1 chunks...
[2026-01-08 00:15:57,330: INFO/ForkPoolWorker-8] HTTP Request: POST https://api.openai.com/v1/audio/translations "HTTP/1.1 200 OK"
[2026-01-08 00:15:57,331: INFO/ForkPoolWorker-8] Assembling chunks in chronological order...
[2026-01-08 00:15:57,332: INFO/ForkPoolWorker-8] Transcription successfully completed. Results saved to: /home/mahmoud/sprints/AIAT_Snippets/src/data/output/33/transcript_timestamped.json
[2026-01-08 00:15:57,473: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.33 "HTTP/2 200 OK"
[2026-01-08 00:15:57,475: INFO/ForkPoolWorker-8] Running AI preprocessing for session 33
[2026-01-08 00:15:57,475: INFO/ForkPoolWorker-8] --- Starting Pre-processing for /home/mahmoud/sprints/AIAT_Snippets/src/data/output/33/transcript_timestamped.json ---
[2026-01-08 00:15:57,475: INFO/ForkPoolWorker-8] Decision of segmentation points starts...
[92m00:15:57 - LiteLLM:INFO[0m: utils.py:3258 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:15:57,481: INFO/ForkPoolWorker-8] 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:15:59,245: INFO/ForkPoolWorker-8] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m00:15:59 - LiteLLM:INFO[0m: utils.py:1260 - Wrapper: Completed Call, calling success_handler
[2026-01-08 00:15:59,254: INFO/ForkPoolWorker-8] Wrapper: Completed Call, calling success_handler
[92m00:15:59 - LiteLLM:INFO[0m: utils.py:3258 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:15:59,258: INFO/ForkPoolWorker-8] 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:15:59,798: INFO/ForkPoolWorker-8] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m00:15:59 - LiteLLM:INFO[0m: utils.py:1260 - Wrapper: Completed Call, calling success_handler
[2026-01-08 00:15:59,800: INFO/ForkPoolWorker-8] Wrapper: Completed Call, calling success_handler
[2026-01-08 00:15:59,800: INFO/ForkPoolWorker-8] Merging into 1 input segments...
[2026-01-08 00:15:59,801: INFO/ForkPoolWorker-8] Executing batched LLM cleansing process...
[92m00:15:59 - LiteLLM:INFO[0m: utils.py:3258 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:15:59,802: INFO/ForkPoolWorker-8] 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:16:01,160: INFO/ForkPoolWorker-8] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m00:16:01 - LiteLLM:INFO[0m: utils.py:1260 - Wrapper: Completed Call, calling success_handler
[2026-01-08 00:16:01,163: INFO/ForkPoolWorker-8] Wrapper: Completed Call, calling success_handler
[2026-01-08 00:16:01,164: INFO/ForkPoolWorker-8] Identified 0 segments for removal.
[2026-01-08 00:16:01,165: INFO/ForkPoolWorker-8] Pre-processing phase complete.
[2026-01-08 00:16:01,165: INFO/ForkPoolWorker-8] Running CrewAI pipeline for session 33
[2026-01-08 00:16:01,165: INFO/ForkPoolWorker-8] Initiating CrewAI Pipeline in /home/mahmoud/sprints/AIAT_Snippets/src/data/output/33...
[2026-01-08 00:16:01,165: INFO/ForkPoolWorker-8] Task 1: Conceptual Merging...
[2026-01-08 00:16:01,166: INFO/ForkPoolWorker-8] Kicking off task for /home/mahmoud/sprints/AIAT_Snippets/src/data/output/33/4-conceptual_merges.json...
[2026-01-08 00:16:01,180: WARNING/ForkPoolWorker-8]   Agent Started 
                                                        
  Agent: Instructional Designer                         
                                                        
  Task: Merge segments into logical clusters (aim for   
  clusters of 1-3 minutes each, but adapt if video is   
  short). Input: [{"id": "seg_1", "text": "I'm telling  
  you, if we can't do it, we can't do anything. That's  
  what I'm doing right now. I'm fighting. I'm           
  fighting.", "start": 0.0, "end": 10.0,                
  "mini_segments_used": [0, 1, 2, 3]}]                  
                                                        

[92m00:16:01 - LiteLLM:INFO[0m: utils.py:3258 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:16:01,181: INFO/ForkPoolWorker-8] 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:16:03,737: INFO/ForkPoolWorker-8] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m00:16:03 - LiteLLM:INFO[0m: utils.py:1260 - Wrapper: Completed Call, calling success_handler
[2026-01-08 00:16:03,741: INFO/ForkPoolWorker-8] Wrapper: Completed Call, calling success_handler
[2026-01-08 00:16:03,742: WARNING/ForkPoolWorker-8]   Agent Final Answer 
                                                        
  Agent: Instructional Designer                         
                                                        
  Final Answer:                                         
  [{"id": "merged_seg_1", "text": "I'm telling you, if  
  we can't do it, we can't do anything. That's what     
  I'm doing right now. I'm fighting. I'm fighting.",    
  "start": 0.0, "end": 10.0}]                           
                                                        

[2026-01-08 00:16:03,755: INFO/ForkPoolWorker-8] Task 2: Final Processing...
[2026-01-08 00:16:03,756: INFO/ForkPoolWorker-8] Kicking off task for /home/mahmoud/sprints/AIAT_Snippets/src/data/output/33/5-final_results.json...
[2026-01-08 00:16:03,769: WARNING/ForkPoolWorker-8]   Agent Started 
                                                        
  Agent: Instructional Designer                         
                                                        
  Task: Filter and finalize segments. Input: [{"id":    
  "merged_seg_1", "text": "I'm telling you, if we       
  can't do it, we can't do anything. That's what I'm    
  doing right now. I'm fighting. I'm fighting.",        
  "start": 0.0, "end": 10.0}]                           
                                                        

[92m00:16:03 - LiteLLM:INFO[0m: utils.py:3258 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:16:03,769: INFO/ForkPoolWorker-8] 
LiteLLM completion() model= gpt-4o-mini; provider = openai
[2026-01-08 00:16:06,437: INFO/ForkPoolWorker-8] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m00:16:06 - LiteLLM:INFO[0m: utils.py:1260 - Wrapper: Completed Call, calling success_handler
[2026-01-08 00:16:06,442: INFO/ForkPoolWorker-8] Wrapper: Completed Call, calling success_handler
[2026-01-08 00:16:06,443: WARNING/ForkPoolWorker-8]   Agent Final Answer 
                                                        
  Agent: Instructional Designer                         
                                                        
  Final Answer:                                         
  [{"id": "merged_seg_1", "text": "I'm telling you, if  
  we can't do it, we can't do anything. That's what     
  I'm doing right now. I'm fighting. I'm fighting.",    
  "start": 0.0, "end": 10.0}]                           
                                                        

[2026-01-08 00:16:06,456: INFO/ForkPoolWorker-8] CrewAI processing successfully finished.
[2026-01-08 00:16:06,456: INFO/ForkPoolWorker-8] Running postprocessing for session 33
[2026-01-08 00:16:06,457: INFO/ForkPoolWorker-8] Saving identified snippets for session 33 to database
[2026-01-08 00:16:07,202: INFO/ForkPoolWorker-8] HTTP Request: DELETE https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/snippet?session_id=eq.33 "HTTP/2 200 OK"
[2026-01-08 00:16:07,203: WARNING/ForkPoolWorker-8] No records found in snippet to delete with filters {'session_id': 33}
[2026-01-08 00:16:07,354: INFO/ForkPoolWorker-8] HTTP Request: POST https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/snippet "HTTP/2 201 Created"
[2026-01-08 00:16:07,537: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.33 "HTTP/2 200 OK"
[2026-01-08 00:16:07,538: INFO/ForkPoolWorker-8] Session 33 pipeline completed successfully.
[2026-01-08 00:16:07,539: INFO/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[c775dcab-a5b2-4436-98dc-b1745f9f9524] succeeded in 22.871941088000312s: None
[2026-01-08 00:30:01,527: INFO/MainProcess] Task src.app.workers.tasks.process_session_pipeline[299a39d4-4f95-4eaa-a106-73099dc835a4] received
[2026-01-08 00:30:01,527: INFO/ForkPoolWorker-8] Starting session pipeline task for session_id: 34
[2026-01-08 00:30:02,214: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.34&order=created_at.desc "HTTP/2 200 OK"
[2026-01-08 00:30:02,339: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.34 "HTTP/2 200 OK"
[2026-01-08 00:30:02,340: INFO/ForkPoolWorker-8] Downloading video for session 34 to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34
[2026-01-08 00:30:02,340: INFO/ForkPoolWorker-8] Detected Google Drive link. Converted to download URL: https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB
[2026-01-08 00:30:02,340: INFO/ForkPoolWorker-8] Downloading https://drive.google.com/uc?export=download&id=1s4ehwWpM0IBIav8duGXcRRU3Ckb407JB to /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4...
[2026-01-08 00:30:03,258: INFO/ForkPoolWorker-8] Successfully downloaded: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4
[2026-01-08 00:30:03,407: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.34 "HTTP/2 200 OK"
[2026-01-08 00:30:03,410: INFO/ForkPoolWorker-8] Generating transcript for session 34
[2026-01-08 00:30:03,410: INFO/ForkPoolWorker-8] Starting transcription process for: /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4
[2026-01-08 00:30:03,413: ERROR/ForkPoolWorker-8] Transcription process failed for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:30:03,413: ERROR/ForkPoolWorker-8] Pipeline failed for session 34: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:30:03,537: INFO/ForkPoolWorker-8] HTTP Request: PATCH https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?id=eq.34 "HTTP/2 200 OK"
[2026-01-08 00:30:03,539: ERROR/ForkPoolWorker-8] Task src.app.workers.tasks.process_session_pipeline[299a39d4-4f95-4eaa-a106-73099dc835a4] raised unexpected: Exception('Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.\nHere are the file infos returned by ffmpeg:\n\nffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers\n  built with gcc 8 (Debian 8.3.0-6)\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg\n  libavutil      59.  8.100 / 59.  8.100\n  libavcodec     61.  3.100 / 61.  3.100\n  libavformat    61.  1.100 / 61.  1.100\n  libavdevice    61.  1.100 / 61.  1.100\n  libavfilter    10.  1.100 / 10.  1.100\n  libswscale      8.  1.100 /  8.  1.100\n  libswresample   5.  1.100 /  5.  1.100\n  libpostproc    58.  1.100 / 58.  1.100\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found\n[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input\nError opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.\nError opening input files: Invalid data found when processing input\n')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 285, in ffmpeg_parse_infos
    line = [l for l in lines if keyword in l][index]
IndexError: list index out of range

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 62, in generate_transcript_from_video
    clip = VideoFileClip(video_path)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/VideoFileClip.py", line 88, in __init__
    self.reader = FFMPEG_VideoReader(filename, pix_fmt=pix_fmt,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 35, in __init__
    infos = ffmpeg_parse_infos(filename, print_infos, check_duration,
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/moviepy/video/io/ffmpeg_reader.py", line 289, in ffmpeg_parse_infos
    raise IOError(("MoviePy error: failed to read the duration of file %s.\n"
OSError: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 134, in process_session_pipeline
    raise e
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/workers/tasks.py", line 72, in process_session_pipeline
    transcript_path = TranscriptionService.generate_transcript_from_video(
  File "/home/mahmoud/sprints/AIAT_Snippets/src/app/services/transcription_service.py", line 143, in generate_transcript_from_video
    raise Exception(f"Transcription failed: {str(e)}")
Exception: Transcription failed: MoviePy error: failed to read the duration of file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Here are the file infos returned by ffmpeg:

ffmpeg version 7.0.2-static https://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2024 the FFmpeg developers
  built with gcc 8 (Debian 8.3.0-6)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gmp --enable-libgme --enable-gray --enable-libaom --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-libsoxr --enable-libspeex --enable-libsrt --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libdav1d --enable-libxvid --enable-libzvbi --enable-libzimg
  libavutil      59.  8.100 / 59.  8.100
  libavcodec     61.  3.100 / 61.  3.100
  libavformat    61.  1.100 / 61.  1.100
  libavdevice    61.  1.100 / 61.  1.100
  libavfilter    10.  1.100 / 10.  1.100
  libswscale      8.  1.100 /  8.  1.100
  libswresample   5.  1.100 /  5.  1.100
  libpostproc    58.  1.100 / 58.  1.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] Format mov,mp4,m4a,3gp,3g2,mj2 detected only with low score of 1, misdetection possible!
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xdb69f00] moov atom not found
[in#0 @ 0xdb69bc0] Error opening input: Invalid data found when processing input
Error opening input file /home/mahmoud/sprints/AIAT_Snippets/src/data/input/34/downloaded_video.mp4.
Error opening input files: Invalid data found when processing input

[2026-01-08 00:49:27,483: INFO/MainProcess] Task src.app.workers.tasks.generate_snippet_video[7c8dc493-ce5e-42fd-9cb3-43b97145c0ff] received
[2026-01-08 00:49:27,484: INFO/ForkPoolWorker-8] Starting snippet generation task for snippet_id: 5
[2026-01-08 00:49:28,241: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/snippet?select=%2A&id=eq.5&order=created_at.desc "HTTP/2 200 OK"
[2026-01-08 00:49:28,390: INFO/ForkPoolWorker-8] HTTP Request: GET https://vpgamxzntjoixfgdncwt.supabase.co/rest/v1/session?select=%2A&id=eq.35&order=created_at.desc "HTTP/2 200 OK"
[2026-01-08 00:49:28,391: INFO/ForkPoolWorker-8] Processing video for snippet 5...
[2026-01-08 00:49:28,392: INFO/ForkPoolWorker-8] Starting FFmpeg processing for /home/mahmoud/sprints/AIAT_Snippets/src/data/input/35/downloaded_video.mp4
[2026-01-08 00:49:28,473: INFO/ForkPoolWorker-8] Processing video: 1) Creating_and_Delivering_Value_through_Marketing.mp4

Restarting celery worker (/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/__main__.py -A src.app.core.celery_app worker --loglevel=info -Q main-queue,video-queue)

worker: Warm shutdown (MainProcess)
[2026-01-08 02:26:04,644: ERROR/MainProcess] Process 'ForkPoolWorker-12' pid:33995 exited with 'exitcode 70'
[2026-01-08 02:26:04,655: ERROR/MainProcess] Process 'ForkPoolWorker-11' pid:33993 exited with 'exitcode 70'
[2026-01-08 02:26:04,665: ERROR/MainProcess] Process 'ForkPoolWorker-10' pid:33991 exited with 'exitcode 70'
[2026-01-08 02:26:04,676: ERROR/MainProcess] Process 'ForkPoolWorker-9' pid:33989 exited with 'exitcode 70'
[2026-01-08 02:26:04,686: ERROR/MainProcess] Process 'ForkPoolWorker-8' pid:33987 exited with 'exitcode 70'
[2026-01-08 02:26:04,696: ERROR/MainProcess] Process 'ForkPoolWorker-7' pid:33980 exited with 'exitcode 70'
[2026-01-08 02:26:04,707: ERROR/MainProcess] Process 'ForkPoolWorker-6' pid:33978 exited with 'exitcode 70'
[2026-01-08 02:26:04,717: ERROR/MainProcess] Process 'ForkPoolWorker-5' pid:33976 exited with 'exitcode 70'
[2026-01-08 02:26:04,727: ERROR/MainProcess] Process 'ForkPoolWorker-4' pid:33974 exited with 'exitcode 70'
[2026-01-08 02:26:04,738: ERROR/MainProcess] Process 'ForkPoolWorker-3' pid:33972 exited with 'exitcode 70'
[2026-01-08 02:26:04,748: ERROR/MainProcess] Process 'ForkPoolWorker-2' pid:33970 exited with 'exitcode 70'
[2026-01-08 02:26:04,759: ERROR/MainProcess] Process 'ForkPoolWorker-1' pid:33958 exited with 'exitcode 70'
[2026-01-08 02:26:04,792: ERROR/MainProcess] Task handler raised error: WorkerLostError('Worker exited prematurely: exitcode 70 Job: 11.')
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/billiard/pool.py", line 1265, in mark_as_worker_lost
    raise WorkerLostError(
billiard.einfo.ExceptionWithTraceback: 
"""
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/worker/worker.py", line 203, in start
    self.blueprint.start(self)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/bootsteps.py", line 116, in start
    step.start(parent)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/bootsteps.py", line 365, in start
    return self.obj.start()
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 341, in start
    blueprint.start(self)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/bootsteps.py", line 116, in start
    step.start(parent)
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 772, in start
    c.loop(*c.loop_args())
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/worker/loops.py", line 86, in asynloop
    state.maybe_shutdown()
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/worker/state.py", line 93, in maybe_shutdown
    raise WorkerShutdown(should_stop)
celery.exceptions.WorkerShutdown: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/billiard/pool.py", line 1265, in mark_as_worker_lost
    raise WorkerLostError(
billiard.exceptions.WorkerLostError: Worker exited prematurely: exitcode 70 Job: 11.
"""
Traceback (most recent call last):
  File "/home/mahmoud/miniconda3/envs/aiat/lib/python3.10/site-packages/celery/__main__.py", line 5, in <module>
    from . import maybe_patch_concurrency
ImportError: attempted relative import with no known parent package
